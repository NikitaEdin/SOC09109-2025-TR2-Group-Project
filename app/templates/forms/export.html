<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% if title %}
    <title>Export - {{title}}</title>
    {% else %}
    <title>Export Document</title>
    {% endif %}

    <!-- Favourite Icon -->
    <!-- <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon"> -->

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          crossorigin="anonymous" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

</head>
<body class="d-flex gap-2 flex-column align-items-center">

<div class="d-flex mt-2 gap-2 flex-column align-items-center no-print">
    <p style="margin: 0;">Click the button below to print to PDF</p>
    <button class="btn btn-primary" id="print-button">Save Document</button>
    <p class="small">If some elements are missing, enable "Print Background colors and images" in your browser's print menu. If that doesn't work, please use a chromium based browser.</p>
</div>

{% for template in form_data %}
<div class="container-lg print-container d-flex flex-column gap-1">
    <img
        alt="Edinburgh Napier University Logo"
        src="/static/Images/Logos/ENU%20Main%20Logo/ENU%20Main%20Logo/png%20Screen/ENU%20logo.png"
        class="w-50 mb-5 print-only"
        style="align-self: flex-end;"
    />

    <h1>{{ template.title }}</h1>
    <p>{{ template.header }}</p>

    {% for section in template.form.sections %}
        <hr>

        <h2 class="fs-3">{{ section.header }}</h2>

        {% for field in section.fields %}
            {% if not field.value or field.value == "" %}
                <p>
                    <span class="fw-bold fs-6">{{ field.name }}:</span>
                    <span class="text-danger">N/A</span>
                </p>
            {% elif field.type == "text" %}
               <p>
                   <span class="fw-bold fs-6">{{ field.name }}:</span>
                   {{ field.value|safe }}
               </p>
            {% elif field.type == "textarea" %}
                <div>
                    <p class="fw-bold fs-6 m-0">{{ field.name }}</p>
                    <p class="m-0">{{ field.value|replace("\n", "<br>")|safe }}</p>
                </div>
            {% elif field.type == "date" %}
                <p>
                    <span class="fw-bold fs-6">{{ field.name }}:</span>
                    {{ field.value|safe }}
                </p>
            {% endif %}
        {% endfor %}
    {% endfor %}
</div>
{% endfor %}

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<script>
    // Tooltip
    const tooltipTriggerList = document.querySelectorAll("[data-bs-toggle=\"tooltip\"]");
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

    // Print to PDF
    const printButton = document.getElementById("print-button");

    printButton.addEventListener("click", () => window.print());
</script>
</body>
</html>
